# wolfiot.cpp

This allows you to overlay SSL on top of the TCPClient.  This particular
example allows you to work with the AWS IoT.   This is a very bare bones
example that just got working on 2017-07-21.

# wolfiot/inc/Private.h

This is currently where you set the AWS IoT hostname and certificates to communicate
with the AWT IoT service.  The certificate strings must have linefeeds to be parsed
correctly.  The certificate type can be either PEM or DER.  See Chapter 7 of the
[wolfssl](https://www.wolfssl.com/wolfSSL/Docs-wolfssl-manual-7-keys-and-certificates.html)
documentation.  The certificates are generated by AWS IoT upon creation of the thingy
and its credentials.

```
/* Configuration */
#define DEFAULT_MQTT_HOST       "data.iot.us-west-2.amazonaws.com" /* broker.hivemq.com */

// CA CERT
const unsigned char CAcert[] = "\
-----BEGIN CERTIFICATE-----\n\
MIIE0z....\n\
....
-----END CERTIFICATE-----\n";

// CERT
const unsigned char CLcert[] = "\
-----BEGIN CERTIFICATE-----\n\
MIIDW....\n\
....
-----END CERTIFICATE-----\n";

// PRIVATE KEY
const unsigned char PRcert[] = "\
-----BEGIN RSA PRIVATE KEY-----\n\
MIIE...\n\
-----END RSA PRIVATE KEY-----\n";
```

## Defines

See: wolfiot/inc/wolfssl/wolfcrypt/settings.h

Without debugging, the current size is approximately 106764.

### WOLFSSL_PARTICLE_ARM

This is now the generic define that allows wolfssl to build.  We were using
a similar define WOLFSSL_IAR_ARM that did more of the right things.

### DEBUG_WOLFSSL

With debugging, the size is approximately 127228.

This option turns on verbose debugging when a function is triggered in
setup() or loop().  See: wolfSSL_Debugging_ON(); in logging.cpp.

To obtain error strings, diable the NO_ERROR_STRINGS define. 
NOTE: This also disables the ability to see the cipher suite in use.

### NO_WOLFSSL_SERVER

The server code adds about 6112 bytes to the firmware.  This may be
disabled if you are only using the library for client operations.

### NO_ERROR_STRINGS

NO_ERROR_STRINGS adds about 11152 bytes to the firmware.

### NO_SHA512

SHA512 does not change the size of the firmware.

### NO_DSA

DSA adds about 144 bytes to the firmware.

### NO_HC128

HC128 adds about 48 bytes to the firmware.

### NO_RC4

RC4 adds about 1232 bytes to the firmware.

### NO_MD4

MD4 does not change the size of the firmware.

### NO_MD5

MD5 adds about 2320 bytes to the firmware.

### NO_DES3

DES3 adds about 4128 bytes to the firmware.

# History

## 2017-07-22 

For client only operations, we can disable the server code (NO_WOLFSSL_SERVER).  This
now produces a firmware size of 89324 for client only operations.

See (Chapter 2)[https://www.wolfssl.com/wolfSSL/Docs-wolfssl-manual-2-building-wolfssl.html]
of the wolfssl manual on all the compile options.

Disabled error strings, saving about 11k.  (11152)

Proceeding with general cleanup of code moving stuff into a specific platform define WOLFSSL_PARTICLE_ARM.

Size: 106588
